# Signal Lattice

`Signal Lattice` — браузерный цифровой музыкальный инструмент, замаскированный под интерфейс управления.

Это не DAW, не плагин и не коммерческий продукт.
Это система исследования состояний сигнала: контролируемое напряжение, ритм, нестабильность и наблюдение.

## Концепция

Интерфейс работает как гибрид:
- полу-модульной синтез-логики
- телеметрической/наблюдательной консоли
- автономной машины со своей внутренней логикой

Цели дизайна:
- холодная сигнальная эстетика
- минимум эмоций, максимум информации
- осознанные ограничения вместо «удобства ради удобства»

## Текущие возможности

### Ядро сигналов
- матрица `ROUTING FIELD 12x8` с ручной активацией ячеек
- внутренний тактовый цикл с изменением состояний
- режимы маршрутизации: `A / B / C`
- ограничения:
  - `THRESHOLD LINE`
  - `LIMITER WINDOW`
  - `ROUTE WEIGHT`

### Fault-движок
- fault-профили:
  - `00 NOMINAL`
  - `11 CHOKE`
  - `21 DRIFT`
  - `31 BURST`
- управление интенсивностью: `FAULT INTENSITY`
- адаптивное переключение: `AUTO FAULT`
- индикация фактического профиля: `FAULT ACTUAL`

### Аудиодвижок (Web Audio API)
- двойной осциллятор как источник сигнала
- фильтровое ядро с поведением по режимам
- стадия окраски (`DRIVE`) через waveshaper
- стадия пространства (`SPACE MIX`, `SPACE FEEDBACK`) через delay-feedback
- живая привязка параметров к телеметрии и fault-состоянию

### Внешний вход
- выбор источника:
  - `SYNTHETIC`
  - `MIC INPUT`
- активация микрофона через `ARM MIC` (`getUserMedia`)
- диагностика микрофона:
  - `MIC` статус (`OFF/LIVE/DENY/N/A`)
  - `MIC LEVEL`
  - шкала уровня + удержание пика

### Наблюдение + Scope
- показания:
  - `IN / OUT / LOSS`
- телеметрия:
  - `AMP`, `DENS`, `JITTER`, `CLIP`
- режимы осциллографа:
  - `WAVE` (временная форма сигнала)
  - `SPECTRUM` (частотный спектр)

### Snapshot-система
- 3 слота состояний (`01/02/03`)
- действия:
  - `WRITE`
  - `RECALL`
  - `PURGE`
- локальное хранение в `localStorage`
- JSON экспорт/импорт:
  - `EXPORT`
  - `IMPORT`
  - проверка схемы (`signal-lattice-snapshot-pack-v1`)
  - режимы импорта:
    - merge (`MERGE IMPORT` включен)
    - replace (`MERGE IMPORT` выключен)

## Технологии

- HTML/CSS/JavaScript без фреймворков и сборки
- Web Audio API
- Canvas 2D API для Scope

## Быстрый вход для новичков

Если вы далеки от аудио-инструментов, начните с файла:
- `USER_GUIDE_RU.md`

## Структура проекта

- `index.html` — разметка интерфейса и контролов
- `styles.css` — визуальный язык и адаптивные правила
- `app.js` — логика маршрутизации, телеметрия, аудиограф, scope, snapshots
- `PROJECT_INSTRUCTION.md` — рабочая внутренняя инструкция проекта

## Запуск локально

Сборка не требуется.

### Вариант 1: открыть файл напрямую
Открой `index.html` в современном браузере.

### Вариант 2: рекомендованный локальный сервер
Запусти папку через `http://localhost` (стабильнее для доступа к устройствам):

```powershell
cd c:\Users\alevo\Desktop\0702
python -m http.server 8080
```

Открой:
- `http://localhost:8080`

## Требования к браузеру

Рекомендуется:
- Chrome (последний)
- Edge (последний)

Важно:
- звук включается после первого действия пользователя (политика autoplay)
- микрофон требует явного разрешения
- для стабильной работы медиа лучше использовать `localhost` или secure context

## Быстрый старт

1. Открой страницу.
2. Один раз кликни по интерфейсу (`AUDIO: LIVE`).
3. Переключай ячейки в `ROUTING FIELD`.
4. Меняй режим `A/B/C`.
5. Настраивай ограничения и fault-контуры.
6. Управляй окрасом и пространством через `DRIVE` и `SPACE`.
7. (Опционально) включи микрофон:
   - нажми `ARM MIC`
   - разреши доступ
   - поставь `EXT SOURCE = MIC INPUT`
8. Отслеживай реакцию через телеметрию и scope.
9. Сохраняй состояния в snapshot-слоты.

## Формат Snapshot JSON

Экспортируемый файл содержит:
- `schema`
- `exportedAt`
- объект `slots` (`1`, `2`, `3`)

Каждый слот содержит:
- `controls` (текущие параметры)
- `matrix` (96 значений, это `12x8` в плоском виде)

## Ограничения дизайна

- без скевоморфизма
- без музыкальных иконок
- без имитации железа
- максимум 2 акцентных цвета + черный
- один технический моно-шрифт

Текущая палитра:
- `#000000`
- `#B8C2CC`
- `#00E5FF`

## Ограничения текущей версии

- пока нет MIDI
- пока нет внешней синхронизации clock
- пока нет scene-morph между snapshot
- микрофонный тракт пока ориентирован на level-driven поведение, без продвинутой динамической обработки

## Roadmap (дальше)

- scene morph между snapshot
- продвинутый clock engine (internal/external sync)
- limiter/compressor для микрофонного входа
- scripted fault transitions
- расширенные миграции/версии snapshot-схемы

## Лицензия

Файл лицензии пока не добавлен.
Для публичной публикации рекомендуется добавить `LICENSE` (например MIT).
